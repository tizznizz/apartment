TDV['EventDispatcher']=function(){this['_handlers']={};};TDV['EventDispatcher']['prototype']['bind']=function(a,b){if(!(a in this['_handlers']))this['_handlers'][a]=[];this['_handlers'][a]['push'](b);};TDV['EventDispatcher']['prototype']['unbind']=function(a,b){if(a in this['_handlers']){var c=this['_handlers'][a]['indexOf'](b);if(c!=-0x1)this['_handlers'][a]['splice'](c,0x1);}};TDV['EventDispatcher']['prototype']['createNewEvent']=function(a){if(typeof Event==='function')return new Event(a);var b=document['createEvent']('Event');b['initEvent'](a,!![],!![]);return b;};TDV['EventDispatcher']['prototype']['dispatchEvent']=function(a){if(a['type']in this['_handlers']){var b=this['_handlers'][a['type']];for(var c=0x0;c<b['length'];++c){b[c]['call'](window,a);if(a['defaultPrevented'])break;}}};TDV['Tour']=function(a,b){TDV['EventDispatcher']['call'](this);this['_settings']=a;this['_devicesUrl']=b;this['_player']=undefined;this['_playersPlayingTmp']=[];this['_isInitialized']=![];this['_isPaused']=![];};TDV['Tour']['DEVICE_GENERAL']='general';TDV['Tour']['DEVICE_MOBILE']='mobile';TDV['Tour']['DEVICE_VR']='vr';TDV['Tour']['DEVICE_ORIENTATION_PORTRAIT']='portrait';TDV['Tour']['DEVICE_ORIENTATION_LANDSCAPE']='landscape';TDV['Tour']['EVENT_TOUR_INITIALIZED']='tourInitialized';TDV['Tour']['EVENT_TOUR_LOADED']='tourLoaded';TDV['Tour']['EVENT_TOUR_ENDED']='tourEnded';TDV['Tour']['prototype']=new TDV['EventDispatcher']();TDV['Tour']['prototype']['dispose']=function(){if(!this['_player'])return;if(this['_onHashChange']){window['removeEventListener']('hashchange',this['_onHashChange']);this['_onHashChange']=undefined;}if(this['_onKeyUp']){document['removeEventListener']('keyup',this['_onKeyUp']);this['_onKeyUp']=undefined;}this['_player']['delete']();this['_player']=undefined;};TDV['Tour']['prototype']['load']=function(){if(this['_player'])return;var a=function(e){if(e['name']=='begin'){var f=e['data']['source']['get']('camera');if(f&&f['get']('initialSequence')&&f['get']('initialSequence')['get']('movements')['length']>0x0)return;}if(e['sourceClassName']=='MediaAudio')return;this['_isInitialized']=!![];d['unbind']('preloadMediaShow',a,d,!![]);d['unbindOnObjectsOf']('PanoramaPlayListItem','begin',a,d,!![]);d['unbind']('stateChange',a,d,!![]);if(this['_isPaused'])this['pause']();window['parent']['postMessage'](TDV['Tour']['EVENT_TOUR_LOADED'],'*');this['dispatchEvent'](this['createNewEvent'](TDV['Tour']['EVENT_TOUR_LOADED']));};var b=this['_getScriptUrl']();var c=this['_getOrientation']();this['_settings']['set'](TDV['PlayerSettings']['SCRIPT_URL'],b);var d=this['_player']=TDV['PlayerAPI']['create'](this['_settings']);d['bind']('preloadMediaShow',a,this,!![]);d['bind']('stateChange',a,this,!![]);d['bindOnObjectsOf']('PanoramaPlayListItem','begin',a,this,!![]);d['bindOnObject']('rootPlayer','start',function(f){var g=f['data']['source'];var h=window['navigator']['language']||window['navigator']['userLanguage']||'en';var j=g['get']('data')['locales']||{};var k=g['get']('data')['defaultLocale']||h;var l=this['locManager']=new TDV['Tour']['LocaleManager'](g,j,k,this['_settings']['get'](TDV['PlayerSettings']['QUERY_STRING_PARAMETERS']));g['get']('data')['localeManager']=l;var m=function(){var s=g['get']('data');if(!('updateText'in s)){s['updateText']=function(w){var x=w[0x0]['split']('.');if(x['length']==0x2){var y=l['trans']['apply'](l,w);var A=w[0x1]||g;if(typeof A=='string'){var B=A['split']('.');A=g[B['shift']()];for(var C=0x0;C<B['length']-0x1;++C){if(A!=undefined)A='get'in A?A['get'](B[C]):A[B[C]];}if(A!=undefined){if('set'in A)A['set'](B[B['length']-0x1],y);else A[B[B['length']-0x1]]=y;}}else{A[x[0x0]]['set'](x[0x1],y);}}};}var t=s['translateObjs'];var u=s['updateText'];var v=function(){for(var w in t){u(t[w]);}};v();v();};this['locManager']['bind'](TDV['Tour']['LocaleManager']['EVENT_LOCALE_CHANGED'],m['bind'](this));var n=this['_getParams'](location['search']['substr'](0x1));var o=n['language'];if(!o||!this['locManager']['hasLocale'](n['language']))o=h;this['setLocale'](o);this['_setMediaFromURL'](this['_getParams'](location['hash']['substr'](0x1)),![])||this['_setMediaFromURL'](n,!![]);if(this['isMobile']()&&TDV['Tour']['DEVICE_MOBILE']in this['_devicesUrl']&&typeof this['_devicesUrl'][TDV['Tour']['DEVICE_MOBILE']]=='object'){var p=function(){if(!g['isCardboardViewMode']()&&g['get']('orientation')!=c){this['updateDeepLink']();this['dispose']();this['load']();}};var q=g['getByClassName']('PanoramaPlayer');for(var r=0x0;r<q['length'];++r){q[r]['bind']('viewModeChange',p,this);}g['bind']('orientationChange',p,this);}this['_onHashChange']=function(){this['_setMediaFromURL'](this['_getParams'](location['hash']['substr'](0x1)),![]);}['bind'](this);this['_onKeyUp']=function(s){if(s['key']=='u'){this['updateDeepLink']();this['copyToClipboard'](location['href']);}}['bind'](this);window['addEventListener']('hashchange',this['_onHashChange']);document['addEventListener']('keyup',this['_onKeyUp']);g['bind']('tourEnded',function(){this['dispatchEvent'](this['createNewEvent'](TDV['Tour']['EVENT_TOUR_ENDED']));},this,!![]);this['dispatchEvent'](this['createNewEvent'](TDV['Tour']['EVENT_TOUR_INITIALIZED']));},this,![]);window['addEventListener']('message',function(f){var g=f['data'];if(g=='pauseTour')g='pause';else if(g=='resumeTour')g='resume';else return;this[g]['apply'](this);}['bind'](this));};TDV['Tour']['prototype']['pause']=function(){this['_isPaused']=!![];if(!this['_isInitialized'])return;var a=player['getByClassName']('PlayList');for(var b=0x0,c=a['length'];b<c;b++){var d=a[b];var e=d['get']('selectedIndex');if(e!=-0x1){var f=d['get']('items')[e];var g=f['get']('player');if(g&&g['pause']){this['_playersPlayingTmp']['push'](g);g['pause']();}}}this['_player']['getById']('pauseGlobalAudios')();};TDV['Tour']['prototype']['resume']=function(){this['_isPaused']=![];if(!this['_isInitialized'])return;while(this['_playersPlayingTmp']['length']){var a=this['playersPlayingTmp']['pop']();a['play']();}this['_player']['getById']('resumeGlobalAudios')();};TDV['Tour']['prototype']['setMediaByIndex']=function(a){var b=this['_getRootPlayer']();if(b!==undefined){return b['setMainMediaByIndex'](a);}};TDV['Tour']['prototype']['setMediaByName']=function(a){var b=this['_getRootPlayer']();if(b!==undefined){return b['setMainMediaByName'](a);}};TDV['Tour']['prototype']['triggerOverlayByName']=function(a,b,c){var d=this['_getRootPlayer']();if(d!==undefined){a['bind']('begin',function(f){a['unbind']('begin',arguments['callee'],this);var g=d['getPanoramaOverlayByName'](a['get']('media'),b);if(g)d['triggerOverlay'](g,c);},d);}};TDV['Tour']['prototype']['updateDeepLink']=function(){var a=this['_getRootPlayer']();if(a!==undefined){var b=a['mainPlayList']['get']('selectedIndex');if(b>=0x0){location['hash']='#media='+(b+0x1);}else{var c=a['getActiveMediaWithViewer'](a['MainViewer']);if(c!=undefined){var d=c['get']('data');if(d){location['hash']='#media-name='+d['label'];}}}}};TDV['Tour']['prototype']['setLocale']=function(a){var b=this['_getRootPlayer']();if(b!==undefined&&this['locManager']!==undefined){this['locManager']['setLocale'](a);}};TDV['Tour']['prototype']['isMobile']=function(){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i['test'](navigator['userAgent']||navigator['vendor']||window['opera']);};TDV['Tour']['prototype']['copyToClipboard']=function(a){if(navigator['clipboard']){navigator['clipboard']['writeText'](a);}else{var b=document['createElement']('textarea');b['value']=a;b['style']['position']='fixed';document['body']['appendChild'](b);b['focus']();b['select']();try{document['execCommand']('copy');}catch(c){}document['body']['removeChild'](b);}};TDV['Tour']['prototype']['_getOrientation']=function(){return window['innerWidth']>window['innerHeight']?TDV['Tour']['DEVICE_ORIENTATION_LANDSCAPE']:TDV['Tour']['DEVICE_ORIENTATION_PORTRAIT'];};TDV['Tour']['prototype']['_getRootPlayer']=function(){return this['_player']!==undefined?this['_player']['getById']('rootPlayer'):undefined;};TDV['Tour']['prototype']['_getScriptUrl']=function(){var a=TDV['Tour']['DEVICE_GENERAL'];if(this['isMobile']()&&TDV['Tour']['DEVICE_MOBILE']in this['_devicesUrl']){a=TDV['Tour']['DEVICE_MOBILE'];}var b=this['_devicesUrl'][a];if(typeof b=='object'){var c=this['_getOrientation']();if(c in b){b=b[c];}}return b;};TDV['Tour']['prototype']['_setMediaFromURL']=function(a,b){var c=undefined;if('media'in a){var d=a['media'];var e=Number(d);c=isNaN(e)?this['setMediaByName'](d):this['setMediaByIndex'](e-0x1);}else if('media-index'in a){c=this['setMediaByIndex'](parseInt(a['media-index'])-0x1);}else if('media-name'in a){c=this['setMediaByName'](a['media-name']);}if(c==undefined&&b){c=this['setMediaByIndex'](0x0);}if(c!=undefined&&'trigger-overlay-name'in a){this['triggerOverlayByName'](c,a['trigger-overlay-name'],'trigger-overlay-event'in a?a['trigger-overlay-event']:'click');}return c!=undefined;};TDV['Tour']['prototype']['_getParams']=function(a){var b={};a['split']('&')['forEach'](function(c){var d=c['split']('=')[0x0],e=decodeURIComponent(c['split']('=')[0x1]);b[d]=e;});return b;};TDV['Tour']['LocaleManager']=function(a,b,c,d){TDV['EventDispatcher']['call'](this);this['rootPlayer']=a;this['locales']={};this['defaultLocale']=c;this['queryParam']=d;this['currentLocaleMap']={};this['currentLocaleID']=undefined;for(var e in b){this['registerLocale'](e,b[e]);}};TDV['Tour']['LocaleManager']['EVENT_LOCALE_CHANGED']='localeChanged';TDV['Tour']['LocaleManager']['prototype']=new TDV['EventDispatcher']();TDV['Tour']['LocaleManager']['prototype']['registerLocale']=function(a,b){var c=[a,a['split']('-')[0x0]];for(var d=0x0;d<c['length'];++d){a=c[d];if(!(a in this['locales'])){this['locales'][a]=b;}}};TDV['Tour']['LocaleManager']['prototype']['unregisterLocale']=function(a){delete this['locales'][a];if(a==this['currentLocaleID']){this['setLocale'](this['defaultLocale']);}};TDV['Tour']['LocaleManager']['prototype']['hasLocale']=function(a){return a in this['locales'];};TDV['Tour']['LocaleManager']['prototype']['setLocale']=function(a){var b=undefined;var c=a['split']('-')[0x0];var d=[a,c];for(var e=0x0;e<d['length'];++e){var g=d[e];if(g in this['locales']){b=g;break;}}if(b===undefined){for(var g in this['locales']){if(g['indexOf'](c)==0x0){b=g;break;}}}if(b===undefined){b=this['defaultLocale'];}var h=this['locales'][b];if(h!==undefined&&this['currentLocaleID']!=b){this['currentLocaleID']=b;var j=this;if(typeof h=='string'){var k=new XMLHttpRequest();k['onreadystatechange']=function(){if(k['readyState']==0x4){if(k['status']==0xc8){j['locales'][b]=j['currentLocaleMap']=j['_parsePropertiesContent'](k['responseText']);j['dispatchEvent'](j['createNewEvent'](TDV['Tour']['LocaleManager']['EVENT_LOCALE_CHANGED']));}else{throw h+'\x20can\x27t\x20be\x20loaded';}}};var l=h;if(this['queryParam'])l+=(l['indexOf']('?')==-0x1?'?':'&')+this['queryParam'];k['open']('GET',l);k['send']();}else{this['currentLocaleMap']=h;this['dispatchEvent'](this['createNewEvent'](TDV['Tour']['LocaleManager']['EVENT_LOCALE_CHANGED']));}}};TDV['Tour']['LocaleManager']['prototype']['trans']=function(a){var b=this['currentLocaleMap'][a];if(arguments['length']>0x2){var c=typeof arguments[0x2]=='object'?arguments[0x2]:undefined;var d=arguments;function e(f){return/^\d+$/['test'](f);}b=b['replace'](/\{\{(\w+)\}\}/g,function(f,g){if(e(g))g=d[parseInt(g)+0x1];else if(c!==undefined)g=c[g];if(typeof g=='string')g=this['currentLocaleMap'][g]||g;else if(typeof g=='function')g=g['call'](this['rootPlayer']);return g||'';}['bind'](this));}return b;};TDV['Tour']['LocaleManager']['prototype']['_parsePropertiesContent']=function(a){a=a['replace'](/(^|\n)#[^\n]*/g,'');var b={};var c=a['split']('\x0a');for(var d=0x0,e=c['length'];d<e;++d){var f=c[d]['trim']();if(f['length']==0x0){continue;}var g=f['indexOf']('=');if(g==-0x1){console['error']('Locale\x20parser:\x20Invalid\x20line\x20'+d);continue;}var h=f['substr'](0x0,g)['trim']();var j=f['substr'](g+0x1)['trim']();var k;while((k=j['lastIndexOf']('\x5c'))!=-0x1&&k==j['length']-0x1&&++d<e){j=j['substr'](0x0,j['length']-0x2);f=c[d]['trim']();if(f['length']==0x0)break;j+='\x0a'+f;}b[h]=j;}return b;};TDV['Tour']['HistoryData']=function(a){this['playList']=a;this['list']=[];this['pointer']=-0x1;};TDV['Tour']['HistoryData']['prototype']['add']=function(a){if(this['pointer']<this['list']['length']&&this['list'][this['pointer']]==a){return;}++this['pointer'];this['list']['splice'](this['pointer'],this['list']['length']-this['pointer'],a);};TDV['Tour']['HistoryData']['prototype']['back']=function(){if(!this['canBack']())return;this['playList']['set']('selectedIndex',this['list'][--this['pointer']]);};TDV['Tour']['HistoryData']['prototype']['forward']=function(){if(!this['canForward']())return;this['playList']['set']('selectedIndex',this['list'][++this['pointer']]);};TDV['Tour']['HistoryData']['prototype']['canBack']=function(){return this['pointer']>0x0;};TDV['Tour']['HistoryData']['prototype']['canForward']=function(){return this['pointer']>=0x0&&this['pointer']<this['list']['length']-0x1;};TDV['Tour']['Script']=function(){};TDV['Tour']['Script']['autotriggerAtStart']=function(a,b,c){var d=function(e){b();if(c==!![])a['unbind']('change',d,this);};a['bind']('change',d,this);};TDV['Tour']['Script']['changeBackgroundWhilePlay']=function(a,b,c){var d=function(k){e['unbind']('stop',d,this);if(c==g['get']('backgroundColor')&&j==g['get']('backgroundColorRatios')){g['set']('backgroundColor',h);g['set']('backgroundColorRatios',i);}};var e=a['get']('items')[b];var f=e['get']('player');var g=f['get']('viewerArea');var h=g['get']('backgroundColor');var i=g['get']('backgroundColorRatios');var j=[0x0];if(c!=h||j!=i){g['set']('backgroundColor',c);g['set']('backgroundColorRatios',j);e['bind']('stop',d,this);}};TDV['Tour']['Script']['changePlayListWithSameSpot']=function(a,b){var c=a['get']('selectedIndex');if(c>=0x0&&b>=0x0&&c!=b){var d=a['get']('items')[c];var e=a['get']('items')[b];var f=d['get']('player');var g=e['get']('player');if((f['get']('class')=='PanoramaPlayer'||f['get']('class')=='Video360Player')&&(g['get']('class')=='PanoramaPlayer'||g['get']('class')=='Video360Player')){var h=this['cloneCamera'](e['get']('camera'));this['setCameraSameSpotAsMedia'](h,d['get']('media'));this['startPanoramaWithCamera'](e['get']('media'),h);}}};TDV['Tour']['Script']['cloneCamera']=function(a){var b=this['rootPlayer']['createInstance'](a['get']('class'));b['set']('id',a['get']('id')+'_copy');b['set']('idleSequence',a['get']('initialSequence'));return b;};TDV['Tour']['Script']['executeFunctionWhenChange']=function(a,b,c,d){var e=undefined;var f=function(i){if(i['data']['previousSelectedIndex']==b){if(d)d['call'](this);if(c&&e)e['unbind']('end',c,this);a['unbind']('change',f,this);}};if(c){var g=a['get']('items')[b];if(g['get']('class')=='PanoramaPlayListItem'){var h=g['get']('camera');if(h!=undefined)e=h['get']('initialSequence');if(e==undefined)e=h['get']('idleSequence');}else{e=g['get']('media');}if(e){e['bind']('end',c,this);}}a['bind']('change',f,this);};TDV['Tour']['Script']['fixTogglePlayPauseButton']=function(a){var b=a['get']('buttonPlayPause');if(typeof b!=='undefined'&&a['get']('state')=='playing'){if(!Array['isArray'](b))b=[b];for(var c=0x0;c<b['length'];++c)b[c]['set']('pressed',!![]);}};TDV['Tour']['Script']['getActiveMediaWithViewer']=function(a){var b=this['getActivePlayerWithViewer'](a);if(b==undefined){return undefined;}return this['getMediaFromPlayer'](b);};TDV['Tour']['Script']['getActivePlayerWithViewer']=function(a){var b=this['getCurrentPlayers']();var c=b['length'];while(c-->0x0){var d=b[c];if(d['get']('viewerArea')==a){var e=d['get']('class');if(e=='PanoramaPlayer'&&(d['get']('panorama')!=undefined||d['get']('video')!=undefined))return d;else if((e=='VideoPlayer'||e=='Video360Player')&&d['get']('video')!=undefined)return d;else if(e=='PhotoAlbumPlayer'&&d['get']('photoAlbum')!=undefined)return d;else if(e=='MapPlayer'&&d['get']('map')!=undefined)return d;}}return undefined;};TDV['Tour']['Script']['getCurrentPlayerWithMedia']=function(a){var b=undefined;var c=undefined;switch(a['get']('class')){case'Panorama':case'LivePanorama':case'HDRPanorama':b='PanoramaPlayer';c='panorama';break;case'Video360':b='PanoramaPlayer';c='video';break;case'PhotoAlbum':b='PhotoAlbumPlayer';c='photoAlbum';break;case'Map':b='MapPlayer';c='map';break;case'Video':b='VideoPlayer';c='video';break;};if(b!=undefined){var d=this['getByClassName'](b);for(var e=0x0;e<d['length'];++e){var f=d[e];if(f['get'](c)==a){return f;}}}else{return undefined;}};TDV['Tour']['Script']['getCurrentPlayers']=function(){var a=this['getByClassName']('PanoramaPlayer');a=a['concat'](this['getByClassName']('VideoPlayer'));a=a['concat'](this['getByClassName']('Video360Player'));a=a['concat'](this['getByClassName']('PhotoAlbumPlayer'));a=a['concat'](this['getByClassName']('MapPlayer'));return a;};TDV['Tour']['Script']['getGlobalAudio']=function(a){var b=window['currentGlobalAudios'];if(b!=undefined&&a['get']('id')in b){a=b[a['get']('id')]['audio'];}return a;};TDV['Tour']['Script']['getMediaByName']=function(a){var b=this['getByClassName']('Media');for(var c=0x0,d=b['length'];c<d;++c){var e=b[c];var f=e['get']('data');if(f&&f['label']==a){return e;}}return undefined;};TDV['Tour']['Script']['getComponentByName']=function(a){var b=this['getByClassName']('UIComponent');for(var c=0x0,d=b['length'];c<d;++c){var e=b[c];var f=e['get']('data');if(f!=undefined&&f['name']==a){return e;}}return undefined;};TDV['Tour']['Script']['getMediaFromPlayer']=function(a){switch(a['get']('class')){case'PanoramaPlayer':return a['get']('panorama')||a['get']('video');case'VideoPlayer':case'Video360Player':return a['get']('video');case'PhotoAlbumPlayer':return a['get']('photoAlbum');case'MapPlayer':return a['get']('map');}};TDV['Tour']['Script']['getMediaWidth']=function(a){switch(a['get']('class')){case'Video360':var b=a['get']('video');if(b instanceof Array){var c=0x0;for(var d=0x0;d<b['length'];d++){var e=b[d];if(e['get']('width')>c)c=e['get']('width');}return c;}else{return e['get']('width');}default:return a['get']('width');}};TDV['Tour']['Script']['getMediaHeight']=function(a){switch(a['get']('class')){case'Video360':var b=a['get']('video');if(b instanceof Array){var c=0x0;for(var d=0x0;d<b['length'];d++){var e=b[d];if(e['get']('height')>c)c=e['get']('height');}return c;}else{return e['get']('height');}default:return a['get']('height');}};TDV['Tour']['Script']['getOverlays']=function(a){switch(a['get']('class')){case'Panorama':var b=a['get']('overlays')['concat']()||[];var c=a['get']('frames');for(var d=0x0;d<c['length'];++d){b=b['concat'](c[d]['get']('overlays')||[]);}return b;case'Video360':case'Map':return a['get']('overlays')||[];default:return[];}};TDV['Tour']['Script']['getPanoramaOverlayByName']=function(a,b){var c=this['getOverlays'](a);for(var d=0x0,e=c['length'];d<e;++d){var f=c[d];var g=f['get']('data');if(g!=undefined&&g['label']==b){return f;}}return undefined;};TDV['Tour']['Script']['getPixels']=function(a){var b=/((\+|-)?d+(.d*)?)(px|vw|vh|vmin|vmax)?/i['exec'](a);if(b==undefined){return 0x0;}var c=parseFloat(b[0x1]);var d=b[0x4];var e=this['rootPlayer']['get']('actualWidth')/0x64;var f=this['rootPlayer']['get']('actualHeight')/0x64;switch(d){case'vw':return c*e;case'vh':return c*f;case'vmin':return c*Math['min'](e,f);case'vmax':return c*Math['max'](e,f);default:return c;}};TDV['Tour']['Script']['getPlayListsWithMedia']=function(a,b){var c=[];var d=this['getByClassName']('PlayList');for(var e=0x0,f=d['length'];e<f;++e){var g=d[e];if(b&&g['get']('selectedIndex')==-0x1)continue;if(this['getPlayListItemByMedia'](g,a)!=undefined)c['push'](g);}return c;};TDV['Tour']['Script']['_getPlayListsWithViewer']=function(a){var b=this['getByClassName']('PlayList');var c=function(e){var f=e['get']('items');for(var g=f['length']-0x1;g>=0x0;--g){var h=f[g];var k=h['get']('player');if(k!==undefined&&k['get']('viewerArea')==a)return!![];}return![];};for(var d=b['length']-0x1;d>=0x0;--d){if(!c(b[d]))b['splice'](d,0x1);}return b;};TDV['Tour']['Script']['getFirstPlayListWithMedia']=function(a,b){var c=this['getPlayListsWithMedia'](a,b);return c['length']>0x0?c[0x0]:undefined;};TDV['Tour']['Script']['getPlayListItemByMedia']=function(a,b){var c=a['get']('items');for(var d=0x0,e=c['length'];d<e;++d){var f=c[d];if(f['get']('media')==b)return f;}return undefined;};TDV['Tour']['Script']['getPlayListItems']=function(a,b){var c=function(){switch(a['get']('class')){case'Panorama':case'LivePanorama':case'HDRPanorama':return'PanoramaPlayListItem';case'Video360':return'Video360PlayListItem';case'PhotoAlbum':return'PhotoAlbumPlayListItem';case'Map':return'MapPlayListItem';case'Video':return'VideoPlayListItem';}}();if(c!=undefined){var d=this['getByClassName'](c);for(var e=d['length']-0x1;e>=0x0;--e){var f=d[e];if(f['get']('media')!=a||b!=undefined&&f['get']('player')!=b){d['splice'](e,0x1);}}return d;}else{return[];}};TDV['Tour']['Script']['historyGoBack']=function(a){var b=this['get']('data')['history'][a['get']('id')];if(b!=undefined){b['back']();}};TDV['Tour']['Script']['historyGoForward']=function(a){var b=this['get']('data')['history'][a['get']('id')];if(b!=undefined){b['forward']();}};TDV['Tour']['Script']['init']=function(){if(!Object['hasOwnProperty']('values')){Object['values']=function(g){return Object['keys'](g)['map'](function(h){return g[h];});};}var a=this['get']('data')['history'];var b=function(g){var h=g['source'];var j=h['get']('selectedIndex');if(j<0x0)return;var k=h['get']('id');if(!a['hasOwnProperty'](k))a[k]=new TDV['Tour']['HistoryData'](h);a[k]['add'](j);};var c=this['getByClassName']('PlayList');for(var d=0x0,e=c['length'];d<e;++d){var f=c[d];f['bind']('change',b,this);}};TDV['Tour']['Script']['initGA']=function(){var a=function(D,E,F){ga('send','event',D,E,F);};var d=this['getByClassName']('Panorama');d=d['concat'](this['getByClassName']('Video360'));d=d['concat'](this['getByClassName']('Map'));for(var g=0x0,l=d['length'];g<l;++g){var n=d[g];var o=n['get']('label');var p=this['getOverlays'](n);for(var q=0x0,r=p['length'];q<r;++q){var s=p[q];var t=s['get']('data')!=undefined?o+'\x20-\x20'+s['get']('data')['label']:o;switch(s['get']('class')){case'HotspotPanoramaOverlay':case'HotspotMapOverlay':var u=s['get']('areas');for(var v=0x0;v<u['length'];++v){u[v]['bind']('click',a['bind'](this,'Hotspot','click',t),this);}break;case'CeilingCapPanoramaOverlay':case'TripodCapPanoramaOverlay':s['bind']('click',a['bind'](this,'Cap','click',t),this);break;}}}var w=this['getByClassName']('Button');w=w['concat'](this['getByClassName']('IconButton'));for(var g=0x0,l=w['length'];g<l;++g){var x=w[g];var y=x['get']('data')['name'];x['bind']('click',a['bind'](this,'Skin','click',y),this);}var A=this['getByClassName']('PlayListItem');var B={};for(var g=0x0,l=A['length'];g<l;++g){var C=A[g];var d=C['get']('media');if(!(d['get']('id')in B)){C['bind']('begin',a['bind'](this,'Media','play',d['get']('label')),this);B[d['get']('id')]=C;}}};TDV['Tour']['Script']['isCardboardViewMode']=function(){var a=this['getByClassName']('PanoramaPlayer');return a['length']>0x0&&a[0x0]['get']('viewMode')=='cardboard';};TDV['Tour']['Script']['keepCompVisible']=function(a,b){var c='keepVisibility_'+a['get']('id');var d=this['getKey'](c);if(d==undefined&&b){this['registerKey'](c,b);}else if(d!=undefined&&!b){this['unregisterKey'](c);}};TDV['Tour']['Script']['_initItemWithComps']=function(a,b,c,d,e,f,g,h){var j=a['get']('items')[b];var k=j['get']('media');var l=k['get']('loop')==undefined||k['get']('loop');var m=h>0x0;var n=this['rootPlayer'];var o=function(w){var x=f?f['get']('class'):undefined;var y=undefined;switch(x){case'FadeInEffect':case'FadeOutEffect':y=n['createInstance'](w?'FadeInEffect':'FadeOutEffect');break;case'SlideInEffect':case'SlideOutEffect':y=n['createInstance'](w?'SlideInEffect':'SlideOutEffect');break;}if(y){y['set']('duration',f['get']('duration'));y['set']('easing',f['get']('easing'));if(x['indexOf']('Slide')!=-0x1)y['set'](w?'from':'to',f['get'](w?'from':'to'));}return y;};var p=function(){for(var w=0x0,x=c['length'];w<x;++w){var y=c[w];if(h>0x0){this['setComponentVisibility'](y,!e,0x0,o(!e));}else{var z='visibility_'+y['get']('id');if(this['existsKey'](z)){if(this['getKey'](z))this['setComponentVisibility'](y,!![],0x0,o(!![]));else this['setComponentVisibility'](y,![],0x0,o(![]));this['unregisterKey'](z);}}}j['unbind']('end',p,this);if(!l)k['unbind']('end',p,this);};var q=function(){j['unbind']('stop',q,this,!![]);j['unbind']('stop',q,this);j['unbind']('begin',q,this,!![]);j['unbind']('begin',q,this);for(var w=0x0,x=c['length'];w<x;++w){this['keepCompVisible'](c[w],![]);}};var r=function(w,x,y){var z=function(){var A=function(E,F,G){n['setComponentVisibility'](E,F,x,G,F?'showEffect':'hideEffect',![]);if(y>0x0){var H=x+y+(G!=undefined?G['get']('duration'):0x0);n['setComponentVisibility'](E,!F,H,o(!F),F?'hideEffect':'showEffect',!![]);}};for(var B=0x0,C=c['length'];B<C;++B){var D=c[B];if(e=='toggle'){if(!D['get']('visible'))A(D,!![],o(!![]));else A(D,![],o(![]));}else{A(D,e,o(e));}}j['unbind'](w,z,this);if(w=='end'&&!l)k['unbind'](w,z,this);};j['bind'](w,z,this);if(w=='end'&&!l)k['bind'](w,z,this);};if(d=='begin'){for(var s=0x0,t=c['length'];s<t;++s){var u=c[s];this['keepCompVisible'](u,!![]);if(m){var v='visibility_'+u['get']('id');this['registerKey'](v,u['get']('visible'));}}j['bind']('stop',q,this,!![]);j['bind']('stop',q,this);j['bind']('begin',q,this,!![]);j['bind']('begin',q,this);if(m){j['bind']('end',p,this);if(!l)k['bind']('end',p,this);}}else if(d=='end'&&h>0x0){r('begin',h,0x0);h=0x0;}if(d!=undefined)r(d,g,h);};TDV['Tour']['Script']['loadFromCurrentMediaPlayList']=function(a,b){var c=a['get']('selectedIndex');var d=a['get']('items')['length'];var e=(c+b)%d;while(e<0x0){e=d+e;};if(c!=e){a['set']('selectedIndex',e);}};TDV['Tour']['Script']['openLink']=function(a,b){if(!a||a==location['href']){return;}var c=window&&window['process']&&window['process']['versions']&&window['process']['versions']['electron']||navigator&&navigator['userAgent']&&navigator['userAgent']['indexOf']('Electron')>=0x0;if(b=='_blank'&&c){if(a['startsWith']('/')){var d=window['location']['href']['split']('/');d['pop']();a=d['join']('/')+a;}var e=a['split']('.')['pop']()['toLowerCase']();if(e!='pdf'||a['startsWith']('file://')){var f=window['require']('electron')['shell'];f['openExternal'](a);}else{window['open'](a,b);}}else if(c&&(b=='_top'||b=='_self')){window['location']=a;}else{var g=window['open'](a,b);g['focus']();}};TDV['Tour']['Script']['pauseCurrentPlayers']=function(a){var b=this['getCurrentPlayers']();var c=b['length'];while(c-->0x0){var d=b[c];if(d['get']('state')=='playing'){if(a&&d['get']('class')=='PanoramaPlayer'&&typeof d['get']('video')==='undefined'){d['pauseCamera']();}else{d['pause']();}}else{b['splice'](c,0x1);}}return b;};TDV['Tour']['Script']['pauseGlobalAudiosWhilePlayItem']=function(a,b,c){var d=this;var e=a['get']('items')[b];var f=e['get']('media');var g=e['get']('player');var h=f['get']('id');var i=function(){if(a['get']('selectedIndex')!=b){if(l){g['unbind']('stateChange',j,d);}d['resumeGlobalAudios'](h);}};var j=function(m){var n=m['data']['state'];if(n=='stopped'){this['resumeGlobalAudios'](h);}else if(n=='playing'){this['pauseGlobalAudios'](h,c);}};var k=f['get']('class');var l=k=='Video360'||k=='Video';if(l){g['bind']('stateChange',j,this);}this['pauseGlobalAudios'](h,c);this['executeFunctionWhenChange'](a,b,i,i);};TDV['Tour']['Script']['pauseGlobalAudios']=function(b,c){if(window['pauseGlobalAudiosState']==undefined)window['pauseGlobalAudiosState']={};if(window['pauseGlobalAudiosList']==undefined)window['pauseGlobalAudiosList']=[];if(b in window['pauseGlobalAudiosState']){return;}var d=this['getByClassName']('Audio')['concat'](this['getByClassName']('VideoPanoramaOverlay'));if(window['currentGlobalAudios']!=undefined)d=d['concat'](Object['values'](window['currentGlobalAudios'])['map'](function(r){return r['audio'];}));var e=[];var f=Object['values'](window['pauseGlobalAudiosState']);for(var h=0x0,l=f['length'];h<l;++h){var m=f[h];for(var n=0x0;n<m['length'];++n){var p=m[n];if(e['indexOf'](p)==-0x1)e['push'](p);}}window['pauseGlobalAudiosState'][b]=e;var q=window['currentGlobalAudios']||{};for(var h=0x0,l=d['length'];h<l;++h){var p=d[h];if(p['get']('state')=='playing'&&(c==undefined||c['indexOf'](p)==-0x1)){if(p['get']('id')in q&&!q[p['get']('id')]['asBackground']){this['stopGlobalAudio'](p);}else{p['pause']();e['push'](p);}}}};TDV['Tour']['Script']['pauseGlobalAudio']=function(a){var b=window['currentGlobalAudios'];if(b){var c=b[a['get']('id')];if(c)a=c['audio'];}if(a['get']('state')=='playing')a['pause']();};TDV['Tour']['Script']['playAudioList']=function(a){if(a['length']==0x0)return;var b=-0x1;var c;var d=this['playGlobalAudio'];var e=function(){if(++b>=a['length'])b=0x0;c=a[b];d(c,e,!![]);};e();};TDV['Tour']['Script']['playGlobalAudioWhilePlay']=function(a,b,c,d,e){var g=function(t){if(t['data']['previousSelectedIndex']==b){this['stopGlobalAudio'](c);if(l){var u=k['get']('media');var v=u['get']('audios');v['splice'](v['indexOf'](c),0x1);u['set']('audios',v);}a['unbind']('change',g,this);if(d)d();}};var j=window['currentGlobalAudios'];if(j&&c['get']('id')in j){c=j[c['get']('id')]['audio'];if(c['get']('state')!='playing'){c['play']();}return c;}a['bind']('change',g,this);var k=a['get']('items')[b];var l=k['get']('class')=='PanoramaPlayListItem';if(l){var m=k['get']('media');var j=(m['get']('audios')||[])['slice']();if(c['get']('class')=='MediaAudio'){var n=this['rootPlayer']['createInstance']('PanoramaAudio');n['set']('autoplay',![]);n['set']('audio',c['get']('audio'));n['set']('loop',c['get']('loop'));n['set']('id',c['get']('id'));var o=c['getBindings']('stateChange');for(var p=0x0;p<o['length'];++p){var q=o[p];if(typeof q=='string')q=new Function('event',q);n['bind']('stateChange',q,this);}c=n;}j['push'](c);m['set']('audios',j);}var r=this['playGlobalAudio'](c,d);if(e===!![]){var s=function(){if(r['get']('state')=='playing'){this['pauseGlobalAudios'](r['get']('id'),[r]);}else{this['resumeGlobalAudios'](r['get']('id'));r['unbind']('stateChange',s,this);}};r['bind']('stateChange',s,this);}return r;};TDV['Tour']['Script']['playGlobalAudio']=function(a,b,c){var d=function(){a['unbind']('end',d,this);this['stopGlobalAudio'](a);if(b)b();};a=this['getGlobalAudio'](a);var e=window['currentGlobalAudios'];if(!e){e=window['currentGlobalAudios']={};}e[a['get']('id')]={'audio':a,'asBackground':c||![]};if(a['get']('state')=='playing'){return a;}if(!a['get']('loop')){a['bind']('end',d,this);}a['play']();return a;};TDV['Tour']['Script']['resumeGlobalAudios']=function(b){if(window['pauseGlobalAudiosState']==undefined||!(b in window['pauseGlobalAudiosState']))return;var c=window['pauseGlobalAudiosState'][b];delete window['pauseGlobalAudiosState'][b];var d=Object['values'](window['pauseGlobalAudiosState']);for(var f=0x0,h=d['length'];f<h;++f){var k=d[f];for(var l=c['length']-0x1;l>=0x0;--l){var n=c[l];if(k['indexOf'](n)!=-0x1)c['splice'](l,0x1);}}for(var f=0x0,h=c['length'];f<h;++f){var n=c[f];if(n['get']('state')=='paused')n['play']();}};TDV['Tour']['Script']['resumePlayers']=function(a,b){for(var c=0x0;c<a['length'];++c){var d=a[c];if(b&&d['get']('class')=='PanoramaPlayer'&&typeof d['get']('video')==='undefined'){d['resumeCamera']();}else{d['play']();}}};TDV['Tour']['Script']['stopGlobalAudios']=function(a){var b=window['currentGlobalAudios'];var c=this;if(b){Object['keys'](b)['forEach'](function(d){var e=b[d];if(!a||a&&!e['asBackground']){c['stopGlobalAudio'](e['audio']);}});}};TDV['Tour']['Script']['stopGlobalAudio']=function(a){var b=window['currentGlobalAudios'];if(b){var c=b[a['get']('id')];if(c){a=c['audio'];delete b[a['get']('id')];if(Object['keys'](b)['length']==0x0){window['currentGlobalAudios']=undefined;}}}if(a)a['stop']();};TDV['Tour']['Script']['setCameraSameSpotAsMedia']=function(a,b){var c=this['getCurrentPlayerWithMedia'](b);if(c!=undefined){var d=a['get']('initialPosition');d['set']('yaw',c['get']('yaw'));d['set']('pitch',c['get']('pitch'));d['set']('hfov',c['get']('hfov'));}};TDV['Tour']['Script']['setComponentVisibility']=function(a,b,c,d,e,f){var g=this['getKey']('keepVisibility_'+a['get']('id'));if(g)return;this['unregisterKey']('visibility_'+a['get']('id'));var h=function(){if(d&&e){a['set'](e,d);}a['set']('visible',b);if(a['get']('class')=='ViewerArea'){try{if(b)a['restart']();else if(a['get']('playbackState')=='playing')a['pause']();}catch(n){};}};var j='effectTimeout_'+a['get']('id');if(!f&&window['hasOwnProperty'](j)){var l=window[j];if(l instanceof Array){for(var m=0x0;m<l['length'];m++){clearTimeout(l[m]);}}else{clearTimeout(l);}delete window[j];}else if(b==a['get']('visible')&&!f)return;if(c&&c>0x0){var l=setTimeout(function(){if(window[j]instanceof Array){var n=window[j];var o=n['indexOf'](l);n['splice'](o,0x1);if(n['length']==0x0){delete window[j];}}else{delete window[j];}h();},c);if(window['hasOwnProperty'](j)){window[j]=[window[j],l];}else{window[j]=l;}}else{h();}};TDV['Tour']['Script']['setLocale']=function(a){this['get']('data')['localeManager']['setLocale'](a);};TDV['Tour']['Script']['setEndToItemIndex']=function(a,b,c){var d=function(){if(a['get']('selectedIndex')==b)a['set']('selectedIndex',c);};this['executeFunctionWhenChange'](a,b,d);};TDV['Tour']['Script']['setMapLocation']=function(a,b){var c=function(){a['unbind']('stop',c,this);d['set']('mapPlayer',null);};a['bind']('stop',c,this);var d=a['get']('player');d['set']('mapPlayer',b);};TDV['Tour']['Script']['setMainMediaByIndex']=function(a){var b=undefined;if(a>=0x0&&a<this['mainPlayList']['get']('items')['length']){this['mainPlayList']['set']('selectedIndex',a);b=this['mainPlayList']['get']('items')[a];}return b;};TDV['Tour']['Script']['setMainMediaByName']=function(a){var b=this['_getPlayListsWithViewer'](this['MainViewer']);for(var c=0x0,d=b['length'];c<d;++c){var e=b[c];var f=e['get']('items');for(var g=0x0,h=f['length'];g<h;++g){var k=f[g];var l=k['get']('media')['get']('data');if(l!==undefined&&l['label']==a&&k['get']('player')['get']('viewerArea')==this['MainViewer']){e['set']('selectedIndex',g);return k;}}}};TDV['Tour']['Script']['setMediaBehaviour']=function(a,b,c){var d=this;var e=function(C){if(C['data']['state']=='stopped'){j['call'](this,!![]);}};var f=function(){p['unbind']('begin',f,d);var C=p['get']('media');if(C['get']('class')!='Panorama'||C['get']('camera')!=undefined&&C['get']('camera')['get']('initialSequence')!=undefined){q['bind']('stateChange',e,d);}};var g=function(){var C=m['get']('selectedIndex');if(C!=-0x1){o=C;j['call'](this,![]);}};var h=function(){j['call'](this,![]);};var j=function(C){if(!m)return;var D=p['get']('media');if((D['get']('class')=='Video360'||D['get']('class')=='Video')&&D['get']('loop')==!![]&&!C)return;a['set']('selectedIndex',-0x1);if(x&&w!=-0x1){if(x){if(w>0x0&&x['get']('movements')[w-0x1]['get']('class')=='TargetPanoramaCameraMovement'){var E=y['get']('initialPosition');var F=E['get']('yaw');var G=E['get']('pitch');var H=E['get']('hfov');var I=x['get']('movements')[w-0x1];E['set']('yaw',I['get']('targetYaw'));E['set']('pitch',I['get']('targetPitch'));E['set']('hfov',I['get']('targetHfov'));var J=function(M){E['set']('yaw',F);E['set']('pitch',G);E['set']('hfov',H);s['unbind']('end',J,this);};s['bind']('end',J,this);}x['set']('movementIndex',w);}}if(q){p['unbind']('begin',f,this);q['unbind']('stateChange',e,this);for(var K=0x0;K<z['length'];++K){z[K]['unbind']('click',h,this);}}if(v){var L=this['getMediaFromPlayer'](q);if(L==undefined||L==p['get']('media')){m['set']('selectedIndex',o);}if(a!=m)m['unbind']('change',g,this);}else{t['set']('visible',u);}m=undefined;};if(!c){var k=a['get']('selectedIndex');var l=k!=-0x1?a['get']('items')[a['get']('selectedIndex')]['get']('player'):this['getActivePlayerWithViewer'](this['MainViewer']);if(l){c=this['getMediaFromPlayer'](l);}}var m=undefined;if(c){var n=this['getPlayListsWithMedia'](c,!![]);m=n['indexOf'](a)!=-0x1?a:n['length']>0x0?n[0x0]:undefined;}if(!m){a['set']('selectedIndex',b);return;}var o=m['get']('selectedIndex');var p=a['get']('items')[b];var q=p['get']('player');var r=this['getMediaFromPlayer'](q);if(a['get']('selectedIndex')==b&&r==p['get']('media')||o==-0x1){return;}if(a['get']('selectedIndex')==b&&r!=p['get']('media'))a['set']('selectedIndex',-0x1);var s=m['get']('items')[o];var t=q['get']('viewerArea');var u=t['get']('visible');var v=t==s['get']('player')['get']('viewerArea');if(v){if(a!=m){m['set']('selectedIndex',-0x1);m['bind']('change',g,this);}}else{t['set']('visible',!![]);}var w=-0x1;var x=undefined;var y=s['get']('camera');if(y){x=y['get']('initialSequence');if(x){w=x['get']('movementIndex');}}a['set']('selectedIndex',b);var z=[];var A=function(C){var D=q['get'](C);if(D==undefined)return;if(Array['isArray'](D))z=z['concat'](D);else z['push'](D);};A('buttonStop');for(var B=0x0;B<z['length'];++B){z[B]['bind']('click',h,this);}p['bind']('begin',f,d);this['executeFunctionWhenChange'](a,b,h);};TDV['Tour']['Script']['setOverlayBehaviour']=function(a,b,c,d){var e=function(){switch(c){case'triggerClick':this['triggerOverlay'](a,'click');break;case'stop':case'play':case'pause':a[c]();break;case'togglePlayPause':case'togglePlayStop':if(a['get']('state')=='playing')a[c=='togglePlayPause'?'pause':'stop']();else a['play']();break;}if(d){if(window['overlaysDispatched']==undefined)window['overlaysDispatched']={};var i=a['get']('id');window['overlaysDispatched'][i]=!![];setTimeout(function(){delete window['overlaysDispatched'][i];},0x3e8);}};if(d&&window['overlaysDispatched']!=undefined&&a['get']('id')in window['overlaysDispatched'])return;var f=this['getFirstPlayListWithMedia'](b,!![]);if(f!=undefined){var g=this['getPlayListItemByMedia'](f,b);if(f['get']('items')['indexOf'](g)!=f['get']('selectedIndex')){var h=function(i){g['unbind']('begin',h,this);e['call'](this);};g['bind']('begin',h,this);return;}}e['call'](this);};TDV['Tour']['Script']['setPanoramaCameraWithCurrentSpot']=function(a){var b=this['getActiveMediaWithViewer'](this['MainViewer']);if(b!=undefined&&(b['get']('class')['indexOf']('Panorama')!=-0x1||b['get']('class')=='Video360')){var c=a['get']('media');var d=this['cloneCamera'](a['get']('camera'));this['setCameraSameSpotAsMedia'](d,b);this['startPanoramaWithCamera'](c,d);}};TDV['Tour']['Script']['setPanoramaCameraWithSpot']=function(a,b,c){var d=a['get']('media');var e=this['cloneCamera'](a['get']('camera'));var f=e['get']('initialPosition');f['set']('yaw',b);f['set']('pitch',c);this['startPanoramaWithCamera'](d,e);};TDV['Tour']['Script']['setStartTimeVideo']=function(a,b){var c=this['getPlayListItems'](a);var d=[];var e=function(){for(var j=0x0;j<c['length'];++j){var k=c[j];k['set']('startTime',d[j]);k['unbind']('stop',e,this);}};for(var f=0x0;f<c['length'];++f){var g=c[f];var h=g['get']('player');if(h['get']('video')==a&&h['get']('state')=='playing'){h['seek'](b);}else{d['push'](g['get']('startTime'));g['set']('startTime',b);g['bind']('stop',e,this);}}};TDV['Tour']['Script']['setStartTimeVideoSync']=function(a,b){this['setStartTimeVideo'](a,b['get']('currentTime'));};TDV['Tour']['Script']['shareSocial']=function(a,b,c){if(b==undefined){b=c?location['href']:location['href']['split'](location['search']||location['hash']||/[?#]/)[0x0];}else if(c){b+=location['hash'];}b=function(d){switch(d){case'fb':return'https://www.facebook.com/sharer/sharer.php?u='+b;case'wa':return'https://api.whatsapp.com/send/?text='+encodeURIComponent(b);case'tw':return'https://twitter.com/intent/tweet?source=webclient&url='+b;default:return undefined;}}(a);this['openLink'](b,'_blank');};TDV['Tour']['Script']['showComponentsWhileMouseOver']=function(a,b,c){var d=function(h){for(var j=0x0,k=b['length'];j<k;j++){var l=b[j];if(l['get']('class')=='HTMLText'&&(l['get']('html')==''||l['get']('html')==undefined)){continue;}l['set']('visible',h);}};if(this['rootPlayer']['get']('touchDevice')==!![]){d(!![]);}else{var e=-0x1;var f=function(){d(!![]);if(e>=0x0)clearTimeout(e);a['unbind']('rollOver',f,this);a['bind']('rollOut',g,this);};var g=function(){var h=function(){d(![]);a['unbind']('rollOver',f,this);};a['unbind']('rollOut',g,this);a['bind']('rollOver',f,this);e=setTimeout(h,c);};a['bind']('rollOver',f,this);}};TDV['Tour']['Script']['showPopupMedia']=function(a,b,c,d,e,f,g){var h=this;var i=function(){c['set']('selectedIndex',-0x1);h['MainViewer']['set']('toolTipEnabled',!![]);if(g){h['resumeGlobalAudios']();}this['resumePlayers'](n,!g);if(m){this['unbind']('resize',k,this);}a['unbind']('close',i,this);};var j=function(){a['hide']();};var k=function(){var o=function(G){return a['get'](G)||0x0;};var p=h['get']('actualWidth');var q=h['get']('actualHeight');var r=h['getMediaWidth'](b);var s=h['getMediaHeight'](b);var t=parseFloat(d)/0x64;var u=parseFloat(e)/0x64;var v=t*p;var x=u*q;var y=o('footerHeight');var z=o('headerHeight');if(!z){var A=o('closeButtonIconHeight')+o('closeButtonPaddingTop')+o('closeButtonPaddingBottom');var B=h['getPixels'](o('titleFontSize'))+o('titlePaddingTop')+o('titlePaddingBottom');z=A>B?A:B;z+=o('headerPaddingTop')+o('headerPaddingBottom');}var C=v-o('bodyPaddingLeft')-o('bodyPaddingRight')-o('paddingLeft')-o('paddingRight');var D=x-z-y-o('bodyPaddingTop')-o('bodyPaddingBottom')-o('paddingTop')-o('paddingBottom');var E=C/D;var F=r/s;if(E>F){v=D*F+o('bodyPaddingLeft')+o('bodyPaddingRight')+o('paddingLeft')+o('paddingRight');}else{x=C/F+z+y+o('bodyPaddingTop')+o('bodyPaddingBottom')+o('paddingTop')+o('paddingBottom');}if(v>p*t){v=p*t;}if(x>q*u){x=q*u;}a['set']('width',v);a['set']('height',x);a['set']('x',(p-o('actualWidth'))*0.5);a['set']('y',(q-o('actualHeight'))*0.5);};if(f){this['executeFunctionWhenChange'](c,0x0,j);}var l=b['get']('class');var m=l=='Video'||l=='Video360';c['set']('selectedIndex',0x0);if(m){this['bind']('resize',k,this);k();c['get']('items')[0x0]['get']('player')['play']();}else{a['set']('width',d);a['set']('height',e);}this['MainViewer']['set']('toolTipEnabled',![]);if(g){this['pauseGlobalAudios']();}var n=this['pauseCurrentPlayers'](!g);a['bind']('close',i,this);a['show'](this,!![]);};TDV['Tour']['Script']['showPopupImage']=function(a,b,c,d,e,f,g,h,i,j,k,l){var m=this;var n=![];var o=function(){D['unbind']('loaded',r,m);t();};var p=function(){D['unbind']('click',p,this);if(H!=undefined){clearTimeout(H);}};var q=function(){setTimeout(x,0x0);};var r=function(){m['unbind']('click',o,m);C['set']('visible',!![]);x();E['set']('visible',!![]);D['unbind']('loaded',r,this);D['bind']('userInteractionStart',y,this);D['bind']('userInteractionEnd',z,this);D['bind']('resize',q,this);H=setTimeout(s,0xc8);};var s=function(){H=undefined;if(h){var J=function(){t();};D['bind']('click',p,this);H=setTimeout(J,h);}D['bind']('backgroundClick',t,this);if(b){D['bind']('click',v,this);D['set']('imageCursor','hand');}E['bind']('click',t,this);if(k)k();};var t=function(){m['MainViewer']['set']('toolTipEnabled',!![]);n=!![];if(H)clearTimeout(H);if(I)clearTimeout(I);if(h)p();if(l)l();D['set']('visible',![]);if(f&&f['get']('duration')>0x0){f['bind']('end',u,this);}else{D['set']('image',null);}E['set']('visible',![]);C['set']('visible',![]);m['unbind']('click',o,m);D['unbind']('backgroundClick',t,this);D['unbind']('userInteractionStart',y,this);D['unbind']('userInteractionEnd',z,this,!![]);D['unbind']('resize',q,this);if(b){D['unbind']('click',v,this);D['set']('cursor','default');}E['unbind']('click',t,this);m['resumePlayers'](G,i==null||j);if(i){if(j){m['resumeGlobalAudios']();}m['stopGlobalAudio'](i);}};var u=function(){D['set']('image',null);f['unbind']('end',u,this);};var v=function(){D['set']('image',w()?a:b);};var w=function(){return D['get']('image')==b;};var x=function(){var J=D['get']('actualWidth')-D['get']('imageLeft')-D['get']('imageWidth')+0xa;var K=D['get']('imageTop')+0xa;if(J<0xa)J=0xa;if(K<0xa)K=0xa;E['set']('right',J);E['set']('top',K);};var y=function(){if(I){clearTimeout(I);I=undefined;}else{E['set']('visible',![]);}};var z=function(){if(!n){I=setTimeout(A,0x12c);}};var A=function(){I=undefined;E['set']('visible',!![]);x();};var B=function(J){var K=J['get']('data');if(K&&'extraLevels'in K){var L=m['rootPlayer']['createInstance'](J['get']('class'));var M=K['extraLevels'];L['set']('levels',J['get']('levels')['concat'](M));J=L;}return J;};this['MainViewer']['set']('toolTipEnabled',![]);var C=this['veilPopupPanorama'];var D=this['zoomImagePopupPanorama'];var E=this['closeButtonPopupPanorama'];if(g){for(var F in g){E['set'](F,g[F]);}}var G=this['pauseCurrentPlayers'](i==null||!j);if(i){if(j){this['pauseGlobalAudios']();}this['playGlobalAudio'](i);}var H=undefined;var I=undefined;a=B(a);if(b)b=B(b);D['bind']('loaded',r,this);setTimeout(function(){m['bind']('click',o,m,![]);},0x0);D['set']('image',a);D['set']('customWidth',c);D['set']('customHeight',d);D['set']('showEffect',e);D['set']('hideEffect',f);D['set']('visible',!![]);return D;};TDV['Tour']['Script']['showPopupPanoramaOverlay']=function(a,b,c,d,e,f,g){var h=this;this['MainViewer']['set']('toolTipEnabled',![]);var i=this['isCardboardViewMode']();if(!i){var j=this['zoomImagePopupPanorama'];var k=a['get']('showDuration');var l=a['get']('hideDuration');var n=this['pauseCurrentPlayers'](f==null||!g);var o=a['get']('popupMaxWidth');var p=a['get']('popupMaxHeight');var q=function(){var t=function(){if(!h['isCardboardViewMode']())a['set']('visible',![]);};a['unbind']('showEnd',q,h);a['set']('showDuration',0x1);a['set']('hideDuration',0x1);h['showPopupImage'](c,d,a['get']('popupMaxWidth'),a['get']('popupMaxHeight'),null,null,b,e,f,g,t,r);};var r=function(){var t=function(){a['unbind']('showEnd',t,h);a['set']('visible',![]);a['set']('showDuration',k);a['set']('popupMaxWidth',o);a['set']('popupMaxHeight',p);};h['resumePlayers'](n,f==null||!g);var u=j['get']('imageWidth');var v=j['get']('imageHeight');a['bind']('showEnd',t,h,!![]);a['set']('showDuration',0x1);a['set']('hideDuration',l);a['set']('popupMaxWidth',u);a['set']('popupMaxHeight',v);if(a['get']('visible'))t();else a['set']('visible',!![]);h['MainViewer']['set']('toolTipEnabled',!![]);};a['bind']('showEnd',q,this,!![]);}else{var s=function(){h['resumePlayers'](n,f==null||g);if(f){if(g){h['resumeGlobalAudios']();}h['stopGlobalAudio'](f);}a['unbind']('hideEnd',s,h);h['MainViewer']['set']('toolTipEnabled',!![]);};var n=this['pauseCurrentPlayers'](f==null||!g);if(f){if(g){this['pauseGlobalAudios']();}this['playGlobalAudio'](f);}a['bind']('hideEnd',s,this,!![]);}a['set']('visible',!![]);};TDV['Tour']['Script']['showPopupPanoramaVideoOverlay']=function(a,b,c){var d=this;var e=function(){a['unbind']('showEnd',e);i['bind']('click',g,this);h();i['set']('visible',!![]);};var f=function(){if(!a['get']('loop'))g();};var g=function(){d['MainViewer']['set']('toolTipEnabled',!![]);a['set']('visible',![]);i['set']('visible',![]);i['unbind']('click',g,d);a['unbind']('end',f,d);a['unbind']('hideEnd',g,d,!![]);d['resumePlayers'](k,!![]);if(c){d['resumeGlobalAudios']();}};var h=function(){var l=0xa;var m=0xa;i['set']('right',l);i['set']('top',m);};this['MainViewer']['set']('toolTipEnabled',![]);var i=this['closeButtonPopupPanorama'];if(b){for(var j in b){i['set'](j,b[j]);}}var k=this['pauseCurrentPlayers'](!![]);if(c){this['pauseGlobalAudios']();}a['bind']('end',f,this,!![]);a['bind']('showEnd',e,this,!![]);a['bind']('hideEnd',g,this,!![]);a['set']('visible',!![]);};TDV['Tour']['Script']['showWindow']=function(a,b,c){if(a['get']('visible')==!![]){return;}var d=function(){e();this['resumePlayers'](h,!c);a['unbind']('close',d,this);};var e=function(){a['unbind']('click',e,this);if(f!=undefined){clearTimeout(f);}};var f=undefined;if(b){var g=function(){a['hide']();};a['bind']('click',e,this);f=setTimeout(g,b);}var h=this['pauseCurrentPlayers'](!c);a['bind']('close',d,this);a['show'](this,!![]);};TDV['Tour']['Script']['startPanoramaWithCamera']=function(a,b){if(window['currentPanoramasWithCameraChanged']!=undefined&&window['currentPanoramasWithCameraChanged']['indexOf'](a)!=-0x1){return;}var c=this['getByClassName']('PlayList');if(c['length']==0x0)return;var d=[];for(var f=0x0,g=c['length'];f<g;++f){var h=c[f];var k=h['get']('items');for(var l=0x0,m=k['length'];l<m;++l){var n=k[l];if(n['get']('media')==a&&(n['get']('class')=='PanoramaPlayListItem'||n['get']('class')=='Video360PlayListItem')){d['push']({'camera':n['get']('camera'),'item':n});n['set']('camera',b);}}}if(d['length']>0x0){if(window['currentPanoramasWithCameraChanged']==undefined){window['currentPanoramasWithCameraChanged']=[a];}else{window['currentPanoramasWithCameraChanged']['push'](a);}var o=function(){var p=window['currentPanoramasWithCameraChanged']['indexOf'](a);if(p!=-0x1){window['currentPanoramasWithCameraChanged']['splice'](p,0x1);}for(var q=0x0;q<d['length'];q++){d[q]['item']['set']('camera',d[q]['camera']);d[q]['item']['unbind']('stop',o,this);}};for(var f=0x0;f<d['length'];f++){d[f]['item']['bind']('stop',o,this);}}};TDV['Tour']['Script']['stopAndGoCamera']=function(a,b){var c=a['get']('initialSequence');c['pause']();var d=function(){c['play']();};setTimeout(d,b);};TDV['Tour']['Script']['syncPlaylists']=function(a){var b=function(k,l){for(var m=0x0,n=a['length'];m<n;++m){var o=a[m];if(o!=l){var p=o['get']('items');for(var q=0x0,r=p['length'];q<r;++q){if(p[q]['get']('media')==k){if(o['get']('selectedIndex')!=q){o['set']('selectedIndex',q);}break;}}}}};var c=function(k){var l=k['source'];var m=l['get']('selectedIndex');if(m<0x0)return;var n=l['get']('items')[m]['get']('media');b(n,l);};var d=function(k){var l=k['source']['get']('panoramaMapLocation');if(l){var m=l['get']('map');b(m);}};for(var f=0x0,h=a['length'];f<h;++f){a[f]['bind']('change',c,this);}var j=this['getByClassName']('MapPlayer');for(var f=0x0,h=j['length'];f<h;++f){j[f]['bind']('panoramaMapLocation_change',d,this);}};TDV['Tour']['Script']['translate']=function(a){return this['get']('data')['localeManager']['trans'](a);};TDV['Tour']['Script']['triggerOverlay']=function(a,b){if(a['get']('areas')!=undefined){var c=a['get']('areas');for(var d=0x0;d<c['length'];++d){c[d]['trigger'](b);}}else{a['trigger'](b);}};TDV['Tour']['Script']['updateMediaLabelFromPlayList']=function(a,b,c){var d=function(){var f=a['get']('selectedIndex');if(f>=0x0){var g=function(){j['unbind']('begin',g);h(f);};var h=function(k){var l=j['get']('media');var m=l['get']('data');var n=m!==undefined?m['description']||l['get']('label'):l['get']('label');i(n);};var i=function(k){if(k!==undefined){b['set']('html','<div\x20style=\x22text-align:left\x22><SPAN\x20STYLE=\x22color:#FFFFFF;font-size:12px;font-family:Verdana\x22><span\x20color=\x22white\x22\x20font-family=\x22Verdana\x22\x20font-size=\x2212px\x22>'+k+'</SPAN></div>');}else{b['set']('html','');}};var j=a['get']('items')[f];if(b['get']('html')){i('Loading...');j['bind']('begin',g);}else{h(f);}}};var e=function(){b['set']('html',undefined);a['unbind']('change',d,this);c['unbind']('stop',e,this);};if(c){c['bind']('stop',e,this);}a['bind']('change',d,this);d();};TDV['Tour']['Script']['updateVideoCues']=function(a,b){var c=a['get']('items')[b];var d=c['get']('media');if(d['get']('cues')['length']==0x0)return;var e=c['get']('player');var f=[];var g=function(){if(a['get']('selectedIndex')!=b){d['unbind']('cueChange',h,this);a['unbind']('change',g,this);}};var h=function(j){var k=j['data']['activeCues'];for(var l=0x0,m=f['length'];l<m;++l){var n=f[l];if(k['indexOf'](n)==-0x1&&(n['get']('startTime')>e['get']('currentTime')||n['get']('endTime')<e['get']('currentTime')+0.5)){n['trigger']('end');}}f=k;};d['bind']('cueChange',h,this);a['bind']('change',g,this);};TDV['Tour']['Script']['visibleComponentsIfPlayerFlagEnabled']=function(a,b){var c=this['get'](b);for(var d in a){a[d]['set']('visible',c);}};TDV['Tour']['Script']['getKey']=function(a){return window[a];};TDV['Tour']['Script']['registerKey']=function(a,b){window[a]=b;};TDV['Tour']['Script']['unregisterKey']=function(a){delete window[a];};TDV['Tour']['Script']['existsKey']=function(a){return a in window;};
//# sourceMappingURL=http://localhost:9000/script_v2020.0.29.js.map
//Generated with v2020.0.29, Sun May 17 2020